import{a as k}from"./axios-L6U4YIEh.js";import{E as V,_ as E,m as S,g as T,c as b,a as e,F as N,h as I,t as m,b as a,w as g,f as O,r as h,o as f,n as p,k as u,v as P,G as _,d as U}from"./index-DxbqFczb.js";import{u as v}from"./cartStore-VC40sBgT.js";var A={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hsuanin-vue2024",BASE_URL:"/2023-vue-week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:M,VITE_PATH:j}=A,C=V("orderStore",{state:()=>({products:[],selectedProduct:[],carts:{},status:{addCartLoading:"",cartQtyLoading:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{isPhone(o){return/^(09)[0-9]{8}$/.test(o)?!0:"需要正確的電話號碼"},addOrder(){const o=v(),s=`${M}/api/${j}/order`,n=this.form;console.log(s,n),k.post(s,{data:n}).then(r=>{console.log(r),alert(r.data.message),this.$refs.form.resetForm(),o.getCart()}).catch(r=>{alert(r.response.data.message),console.dir(r)})}}});var D={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hsuanin-vue2024",BASE_URL:"/2023-vue-week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:q,VITE_PATH:R}=D,H={data(){return{originalMessage:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},takeType:"selfTake",takeTime:""}},watch:{originalMessage(o){this.combineMessage()},takeType(){this.combineMessage()},takeTime(){this.combineMessage()}},computed:{...S(v,["carts"])},methods:{...T(v,["getCart"]),...T(C,["isPhone"]),combineMessage(){let o="";(this.takeType||this.takeTime)&&(console.log(this.takeTime),o=`取貨方式：${this.takeType==="selfTake"?"自取":"宅配"}，時間：${this.takeTime}`),this.form.message=`${this.originalMessage}${this.originalMessage?"。":""}${o}`},async addOrder(){try{console.log("addOrder method called");const o=`${q}/api/${R}/order`,s=this.form;console.log(o,s);const n=await k.post(o,{data:s});console.log(n),alert(n.data.message),this.$refs.form.resetForm(),this.getCart(),this.$router.push("/checkOrder")}catch(o){alert(o.response?o.response.data.message:"提交訂單時發生錯誤"),console.error(o)}}},mounted(){this.getCart()}},B={class:"container px-5"},F=O('<h2 class="my-4 text-primary border-primary-left ps-3">訂單進度</h2><div class="row justify-content-center align-items-md-center"><div class="col-md-6"><h3 class="fw-bold mb-4 pt-3 h4 text-primary">訂購人資訊</h3></div><div class="col-md-6"><ul class="list-unstyled mb-0 ms-md-auto d-flex align-items-center justify-content-between justify-content-md-end w-100 mt-md-0 mt-4"><li class="me-md-6 me-3 position-relative custom-step-line"><i class="fas fa-check-circle d-md-inline d-block text-center me-2 text-secondary"></i><span class="text-nowrap text-secondary">商品確認</span></li><li class="me-md-6 me-3 position-relative custom-step-line"><i class="fas fa-check-circle d-md-inline d-block text-center me-2 text-secondary"></i><span class="text-nowrap text-secondary">訂購人填寫</span></li><li><i class="fas fa-dot-circle d-md-inline d-block text-center me-2"></i><span class="text-nowrap">訂單確認</span></li></ul></div></div>',2),L={class:"row flex-row-reverse justify-content-center pb-5"},z={class:"col-md-6"},G={class:"border p-4 mb-4 scrollable-div-500"},Q=["src","alt"],J={class:"w-100"},K={class:"d-flex justify-content-between"},W={class:"mb-0 fw-bold"},X={class:"mb-0"},Y={class:"mb-0 fw-bold"},Z={class:"table mt-4 border-top border-bottom text-muted"},$=e("th",{scope:"row",class:"border-0 px-0 pt-4"}," 小計 ",-1),ee={class:"text-end border-0 px-0 pt-4"},se=e("tr",null,[e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 fw-normal"}," 支付方式 "),e("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"本店目前只提供自取或貨到付款 ")],-1),le={class:"d-flex justify-content-between mt-4"},te=e("p",{class:"mb-0 h4 fw-bold"},"總金額",-1),oe={class:"mb-0 h4 fw-bold"},ae={class:"col-md-6"},ie={class:"mb-2"},de=e("label",{for:"name",class:"form-label text-info mb-0"},"收貨人姓名",-1),ne={class:"mb-3 mt-4"},re=e("label",{for:"email",class:"form-label text-muted mb-0"},"信箱",-1),ce={class:"mb-3 mt-4"},me=e("label",{for:"address",class:"form-label"},"收件人地址",-1),pe={class:"mb-2"},ue=e("label",{for:"phone",class:"form-label text-muted mb-0"},"聯絡手機",-1),he={class:"mb-2"},_e=e("label",{for:"message",class:"text-muted mb-0"},"備註",-1),be=e("label",{for:"text",class:"form-label text-muted mb-0"},"取貨方式",-1),fe={class:"accordion",id:"accordionExample"},ve={class:"card rounded-0"},Te={class:"card-header bg-light border-0 py-3 d-flex justify-content-between align-items-center",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"},ge=e("label",{for:"selfTake",class:"mb-0 position-relative custom-checkout-label"},"自取",-1),ke=e("i",{class:"fas fa-chevron-down"},null,-1),ye={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},xe={class:"card-body bg-light ps-5 py-4"},we={class:"mb-2"},Ve=["disabled"],Ee=e("label",{for:"selfTakeNoon",class:"text-dark mb-0"},"12：00前",-1),Se={class:"mb-0"},Ne=["disabled"],Ie=e("label",{for:"selfTakeNight",class:"text-dark mb-0"},"20：00 店面關店前",-1),Oe={class:"card rounded-0"},Pe={class:"card-header bg-light border-0 py-3 collapsed d-flex justify-content-between align-items-center",id:"headingTwo","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"true","aria-controls":"collapseTwo"},Ue=e("label",{for:"shipTake",class:"mb-0 position-relative custom-checkout-label"},"宅配",-1),Ae=e("i",{class:"fas fa-chevron-down"},null,-1),Me={id:"collapseTwo",class:"collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"},je={class:"card-body bg-light ps-5 py-4"},Ce={class:"mb-2"},De=["disabled"],qe=e("label",{for:"shipTakeNoon",class:"text-dark mb-0"},"中午12：00前",-1),Re={class:"mb-0"},He=["disabled"],Be=e("label",{for:"shipTakeNight",class:"text-dark mb-0"},"中午12：00後",-1),Fe={class:"card rounded-0"},Le=e("div",{class:"card-header bg-light d-flex justify-content-between align-items-center border-0 py-3 collapsed",id:"headingThree","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"true","aria-controls":"collapseThree"},[e("label",{class:"mb-0 position-relative custom-checkout-label fw-bold me-1"},"點開詳閱以下訊息，確認無誤後請打勾"),e("i",{class:"fas fa-chevron-down"})],-1),ze={id:"collapseThree",class:"collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample"},Ge={class:"card-body bg-light ps-3 py-2"},Qe=e("h4",null,"訂購須知",-1),Je=e("div",{class:"scrollable-div p-3"},[e("div",null,[e("h6",null,"商品訂購與出貨"),e("p",null,"訂單確認：訂單一經確認，將於1-2個工作天內處理並出貨。"),e("p",null,"出貨時間：正常情況下，商品將於訂單確認後的3-5個工作天內送達。"),e("p",null,"配送範圍：目前僅限台灣本島地區，離島或偏遠地區可能需額外運費，詳情請見運費說明。")]),e("div",null,[e("h6",null,"退換貨政策"),e("p",null,"七天猶豫期：依據消保法規定，除特殊商品外，消費者享有商品到貨後七天猶豫期權益，期間內可申請退換貨。"),e("p",null,"食品類商品：由於衛生考量，食品類商品一經開封，除非產品本身存在瑕疵或送達時已過期，否則不予退換。"),e("p",null,"瑕疵品處理：若商品在運送過程中受損或有其他非人為因素導致的瑕疵，請於收貨後七天內聯繫我們，我們將提供退換服務。")]),e("div",null,[e("h6",null,"無法辦理退換貨之商品"),e("ul",null,[e("li",null,"商品一經使用或開封。"),e("li",null,"商品銷售頁面已明確說明不接受退換的情況。"),e("li",null,"未依照正確流程或未事先聯繫即自行寄回的商品。")])]),e("div",null,[e("h6",null,"退款流程"),e("p",null,"退款時間：確認收到退貨商品後，我們將在14個工作天內完成退款，退款將通過原付款方式退回。")]),e("div",null,[e("h6",null,"客戶服務"),e("p",null,"如有任何訂購、商品或服務上的問題，歡迎隨時聯繫我們的客戶服務中心，我們將竭誠為您服務。"),e("p",null,"客服時間為週一至週日，上午10:00至晚上8:00。"),e("p",null,"客服專線：02－1234－5678")]),e("div",null,[e("h6",null,"特別聲明"),e("p",null,"本公司保留隨時修改訂購須知的權利，任何修改將於本網站公布，恕不另行通知。"),e("p",null,"若消費者因不當行為對本公司或本網站服務造成損害，本公司有權取消其購買資格，並追究法律責任。"),e("p",null,"再次感謝您的支持與理解，我們期待為您提供優質的產品與服務。")])],-1),Ke={class:"my-2"},We=e("label",{for:"agreeToTerms",class:"text-muted mb-0 ms-3"},"我已閱讀並同意訂購須知！",-1),Xe={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},Ye=e("i",{class:"fas fa-chevron-left me-2"},null,-1),Ze=e("button",{type:"submit",class:"text-muted btn btn-secondary py-3 px-7"},"確認結帳",-1);function $e(o,s,n,r,l,y){const d=h("v-field"),c=h("error-message"),x=h("router-link"),w=h("v-form");return f(),b("div",B,[F,e("div",L,[e("div",z,[e("div",G,[(f(!0),b(N,null,I(o.carts.carts,i=>(f(),b("div",{class:"d-flex mt-2",key:i.id},[e("img",{src:i.product.imageUrl,alt:i.product.title,class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,Q),e("div",J,[e("div",K,[e("p",W,m(i.product.title),1),e("p",X,"NT$"+m(i.final_total),1)]),e("p",Y,"x"+m(i.qty),1)])]))),128)),e("table",Z,[e("tbody",null,[e("tr",null,[$,e("td",ee,"NT$"+m(o.carts.total),1)]),se])]),e("div",le,[te,e("p",oe,"NT$"+m(o.carts.total),1)])])]),e("div",ae,[a(w,{ref:"form",onSubmit:y.addOrder},{default:g(({errors:i})=>[e("div",ie,[de,a(d,{id:"name",name:"姓名",type:"text",class:p(["form-control",{"is-invalid":i.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=t=>l.form.user.name=t)},null,8,["class","modelValue"]),a(c,{name:"姓名",class:"invalid-feedback"})]),e("div",ne,[re,a(d,{id:"email",name:"email",type:"email",class:p(["form-control",{"is-invalid":i.email}]),placeholder:"請輸入 Email",rules:"email|required","aria-describedby":"emailHelp",modelValue:l.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=t=>l.form.user.email=t)},null,8,["class","modelValue"]),a(c,{name:"email",class:"invalid-feedback"})]),e("div",ce,[me,a(d,{id:"address",name:"地址",type:"text",class:p(["form-control",{"is-invalid":i.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":s[2]||(s[2]=t=>l.form.user.address=t)},null,8,["class","modelValue"]),a(c,{name:"地址",class:"invalid-feedback"})]),e("div",pe,[ue,a(d,{id:"phone",name:"手機",type:"tel",class:p(["form-control",{"is-invalid":i.手機}]),placeholder:"請輸入手機，開頭須為09",rules:o.isPhone,modelValue:l.form.user.tel,"onUpdate:modelValue":s[3]||(s[3]=t=>l.form.user.tel=t)},null,8,["class","rules","modelValue"]),a(c,{name:"手機",class:"invalid-feedback"})]),e("div",he,[_e,u(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"5","onUpdate:modelValue":s[4]||(s[4]=t=>l.form.message=t),placeholder:"甜點相關備註或有甚麼悄悄話想跟我們說"},null,512),[[P,l.form.message]])]),be,e("div",fe,[e("div",ve,[e("div",Te,[e("div",null,[a(d,{type:"radio",id:"selfTake",name:"takeType",class:"me-2",value:"selfTake",modelValue:l.takeType,"onUpdate:modelValue":s[5]||(s[5]=t=>l.takeType=t),rules:"takeTypeSelected|required"},null,8,["modelValue"]),ge]),ke]),e("div",ye,[e("div",xe,[e("div",we,[u(e("input",{type:"radio",id:"selfTakeNoon",name:"selfTakeTime",class:"me-2","onUpdate:modelValue":s[6]||(s[6]=t=>l.takeTime=t),value:"12：00前",disabled:l.takeType!=="selfTake"},null,8,Ve),[[_,l.takeTime]]),Ee]),e("div",Se,[u(e("input",{type:"radio",id:"selfTakeNight",name:"selfTakeTime",class:"me-2","onUpdate:modelValue":s[7]||(s[7]=t=>l.takeTime=t),value:"20：00 店面關店前",disabled:l.takeType!=="selfTake"},null,8,Ne),[[_,l.takeTime]]),Ie])])])]),e("div",Oe,[e("div",Pe,[e("div",null,[a(d,{type:"radio",id:"shipTake",name:"takeType",class:"me-2",value:"shipTake",modelValue:l.takeType,"onUpdate:modelValue":s[8]||(s[8]=t=>l.takeType=t),rules:"takeTypeSelected|required"},null,8,["modelValue"]),Ue]),Ae]),e("div",Me,[e("div",je,[e("div",Ce,[u(e("input",{type:"radio",id:"shipTakeNoon",name:"shipTakeTime",class:"me-2","onUpdate:modelValue":s[9]||(s[9]=t=>l.takeTime=t),value:"中午12：00前",disabled:l.takeType!=="shipTake"},null,8,De),[[_,l.takeTime]]),qe]),e("div",Re,[u(e("input",{type:"radio",id:"shipTakeNight",name:"shipTakeTime",class:"me-2","onUpdate:modelValue":s[10]||(s[10]=t=>l.takeTime=t),value:"中午12：00後",disabled:l.takeType!=="shipTake"},null,8,He),[[_,l.takeTime]]),Be])])])]),e("div",Fe,[Le,e("div",ze,[e("div",Ge,[Qe,Je,e("div",Ke,[a(d,{id:"agreeToTerms",type:"checkbox",name:"請閱讀後確認打勾",value:!0,class:p({"is-invalid":i.請閱讀後確認打勾}),rules:"agreeToTerms|required"},null,8,["class"]),We,a(c,{message:"",name:"請閱讀後確認打勾",class:"invalid-feedback d-block"})])])])])]),e("div",Xe,[a(x,{class:"text-dark mt-md-0 mt-3",to:"/cart"},{default:g(()=>[Ye,U("返回購物車")]),_:1}),Ze])]),_:1},8,["onSubmit"])])])])}const ts=E(H,[["render",$e]]);export{ts as default};
