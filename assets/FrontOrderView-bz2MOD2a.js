import{a as f}from"./axios-L6U4YIEh.js";import{d as b}from"./dateMixin-rxM5WT6e.js";import{f as y}from"./formatNumberMixin-IlVSA5eF.js";import{_ as x,c as d,a as t,F as p,h,o as m,t as s,d as a,b as v,w as g,p as k,e as T,r as I}from"./index-EXSfD0I0.js";var P={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hsuanin-vue2024",BASE_URL:"/2023-vue-week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:$,VITE_PATH:M}=P,E={data(){return{orders:{},pickupMethod:"",pickupTime:""}},mixins:[b,y],methods:{async getOrders(){try{const e=`${$}/api/${M}/orders`,r=await f.get(e);this.orders=r.data.orders}catch(e){alert(e.response?e.response.data.message:"訂單查詢時發生錯誤"),console.error(e)}},extractInfo(e){if(e===void 0)return"無";{const r=e.match(/取貨方式：(.*?)(，|。|,|\s|$)/),l=e.match(/時間：(.*?)(，|。|,|\s|$)/);this.pickupMethod="",this.pickupTime="",r&&r.length>1&&(this.pickupMethod=r[1].trim(",")),l&&l.length>1&&(this.pickupTime=l[1].trim(" "));let i="";return this.pickupMethod&&(i+=`取貨方式：${this.pickupMethod}`),this.pickupTime&&(i+=`，時間：${this.pickupTime}`),i||"無"}},replaceInfo(e){if(e){const r=/取貨方式：(.*?)(，|。|,|\s|$)/,l=/時間：(.*?)(，|。|,|\s|$)/,i=e.replace(r,"").replace(l,"");return console.log(i),i.trim()||"無"}else return"無"}},mounted(){this.getOrders()}},c=e=>(k("data-v-ad083062"),e=e(),T(),e),N={class:"container px-5"},S=c(()=>t("h2",{class:"my-4 text-primary border-primary-left ps-3"},"訂單查詢",-1)),V={class:"row justify-content-center pb-5"},j=c(()=>t("h3",{class:"fw-bold mb-4 pt-3 h5"},"訂單相關資訊",-1)),A={class:"col-12"},D={class:"accordion",id:"accordionExample"},O=["id","data-bs-target","aria-controls"],B={class:"mb-0 position-relative custom-checkout-label text-info fw-bold"},F=["id","aria-labelledby"],R={class:"card-body bg-light ps-3 py-4"},q={class:"mb-2",style:{margin:"0 auto","max-width":"900px"}},C={class:"woocommerce-order"},H={class:"woocommerce-notice woocommerce-notice--success woocommerce-thankyou-order-received"},L={class:"woocommerce-order-overview woocommerce-thankyou-order-details order_details"},U={class:"woocommerce-order-overview__order order"},z={class:"woocommerce-order-overview__date date"},G={class:"woocommerce-order-overview__total total"},J={class:"woocommerce-Price-amount amount"},K=c(()=>t("span",{class:"woocommerce-Price-currencySymbol"},"NT$",-1)),Q={class:"woocommerce-order-overview__payment-method method"},W={class:"woocommerce-order-details"},X=c(()=>t("h5",{class:"woocommerce-order-details__title h5 text-info"},"訂購明細",-1)),Y={class:"d-flex d-flex justify-content-center justify-content-md-start table-container"},Z={class:"woocommerce-table woocommerce-table--order-details shop_table order_details table-cart-product"},tt=c(()=>t("thead",{class:"p-3"},[t("tr",null,[t("th",{class:"woocommerce-table__product-name product-name px-2 py-1"},"訂購商品"),t("th",{class:"woocommerce-table__product-table product-total px-2 py-1"},"金額")])],-1)),et={class:"woocommerce-table__product-name product-name px-2 py-1"},ot={class:"product-quantity"},st={class:"woocommerce-table__product-total product-total px-2 py-1"},ct={class:"woocommerce-Price-amount amount"},at=c(()=>t("span",{class:"woocommerce-Price-currencySymbol"},"NT$",-1)),rt=c(()=>t("th",{scope:"row",class:"px-2 py-1"},"總金額：",-1)),it={class:"woocommerce-Price-amount amount px-2 py-1"},lt=c(()=>t("span",{class:"woocommerce-Price-currencySymbol"},"NT$",-1)),nt={class:"mt-3"},dt=c(()=>t("th",{scope:"row",class:"px-2 py-1"},"訊息留言：",-1)),mt={class:"woocommerce-Price-amount amount px-2 py-1"},_t={class:"woocommerce-customer-details"},pt=c(()=>t("h5",{class:"h6 mt-3 text-info"},"訂購人明細",-1)),ht={class:"d-flex justify-content-center justify-content-md-start table-container"},ut={class:"woocommerce-table woocommerce-table--customer-details shop_table customer_details d-flex flex-wrap table-cart-product"},wt={class:"w-100"},ft=c(()=>t("th",{class:"px-2 py-1"},"姓名:",-1)),bt={class:"w-100"},yt=c(()=>t("th",{class:"px-2 py-1"},"信箱:",-1)),xt={class:"w-100"},vt=c(()=>t("th",{class:"px-2 py-1"},"電話:",-1)),gt=c(()=>t("h5",{class:"woocommerce-column__title h6 mt-3 text-info"},"送貨地址 : ",-1)),kt=c(()=>t("h5",{class:"woocommerce-column__title h6 mt-3 text-info"},"是否付款 : ",-1));function Tt(e,r,l,i,u,_){const w=I("router-link");return m(),d("div",N,[S,t("div",V,[j,t("div",A,[t("div",D,[(m(!0),d(p,null,h(u.orders,o=>(m(),d("div",{class:"card rounded-0",key:o.id},[t("div",{class:"card-header bg-white border-0 py-3",id:"heading"+o.id,"data-bs-toggle":"collapse","data-bs-target":"#collapse"+o.id,"aria-expanded":"true","aria-controls":"collapse"+o.id},[t("p",B," 訂單編號 : "+s(o.id),1)],8,O),t("div",{id:"collapse"+o.id,class:"collapse","aria-labelledby":"heading"+o.id,"data-bs-parent":"#accordionExample"},[t("div",R,[t("div",q,[t("div",C,[t("p",H,s(o.user.name)+"您好，此為你這次的訂單明細",1),t("ul",L,[t("li",U,[a(" 訂單編號 : "),t("strong",null,s(o.id),1)]),t("li",z,[a(" 訂購時間 :"),t("strong",null,s(e.formatDate(o.create_at)),1)]),t("li",G,[a(" 訂單金額 :"),t("strong",null,[t("span",J,[K,a(s(e.formatNumber(o.total)),1)])])]),t("li",Q,[a(" 取貨時間及方式: "),t("strong",null,s(_.extractInfo(o.message)),1)])]),t("section",W,[X,t("div",Y,[t("table",Z,[tt,t("tbody",null,[(m(!0),d(p,null,h(o.products,n=>(m(),d("tr",{class:"woocommerce-table__line-item order_item",key:n.id},[t("td",et,[v(w,{to:`product/${n.product.id}`},{default:g(()=>[a(s(n.product.title),1)]),_:2},1032,["to"]),a(),t("strong",ot,"× "+s(n.qty),1)]),t("td",st,[t("span",ct,[at,a(s(e.formatNumber(n.final_total)),1)])])]))),128))]),t("tfoot",null,[t("tr",null,[rt,t("td",null,[t("span",it,[lt,a(s(e.formatNumber(o.total)),1)])])]),t("tr",nt,[dt,t("td",null,[t("span",mt,s(_.replaceInfo(o.message)),1)])])])])]),t("section",_t,[pt,t("div",ht,[t("table",ut,[t("tbody",null,[t("tr",wt,[ft,t("td",null,s(o.user.name),1)]),t("tr",bt,[yt,t("td",null,s(o.user.email),1)]),t("tr",xt,[vt,t("td",null,s(o.user.tel),1)])])])]),gt,t("p",null,s(o.user.address),1),kt,t("p",null,s(o.is_paid?"已付款":"未付款"),1)])])])])])],8,F)]))),128))])])])])}const Et=x(E,[["render",Tt],["__scopeId","data-v-ad083062"]]);export{Et as default};
