import{a as o}from"./axios-L6U4YIEh.js";import{E as n}from"./index-PbS1yvwz.js";var l={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hsuanin-vue2024",BASE_URL:"/2023-vue-week7/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:r,VITE_PATH:c}=l,h=n("cartStore",{state:()=>({products:[],selectedProduct:[],carts:{},status:{addCartLoading:"",cartQtyLoading:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}),actions:{addToCart(t,a=1){const e={product_id:t,qty:a};console.log(e);const d=`${r}/api/${c}/cart`;this.status.addCartLoading=t,o.post(d,{data:e}).then(s=>{console.log(s),this.status.addCartLoading="",this.getCart()}).catch(s=>{alert(s.response.data.message),console.dir(s)})},changeCartQty(t,a=1){const e={product_id:t.product_id,qty:a},d=`${r}/api/${c}/cart/${t.id}`;this.status.cartQtyLoading=t.id,o.put(d,{data:e}).then(s=>{console.log(s),this.status.cartQtyLoading="",this.getCart()}).catch(s=>{alert(s.response.data.message),console.dir(s)})},getCart(){const t=`${r}/api/${c}/cart`;o.get(t).then(a=>{this.carts=a.data.data,console.log(this.carts)}).catch(a=>{alert(a.response.data.message),console.dir(a)})},removeCartItem(t){const a=`${r}/api/${c}/cart/${t}`;this.status.cartQtyLoading=t,console.log(t),o.delete(a).then(e=>{console.log(e),this.status.cartQtyLoading="",this.getCart()}).catch(e=>{alert(e.response.data.message),console.dir(e)})},removeAllCart(){const t=`${r}/api/${c}/carts`;console.log(t),o.delete(t).then(a=>{console.log(a),this.getCart()}).catch(a=>{alert(a.response.data.message),console.dir(a)})},isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"},addOrder(){const t=`${r}/api/${c}/order`,a=this.form;console.log(t,a),o.post(t,{data:a}).then(e=>{console.log(e),alert(e.data.message),this.$refs.form.resetForm(),this.getCart()}).catch(e=>{alert(e.response.data.message),console.dir(e)})}}});export{h as u};
